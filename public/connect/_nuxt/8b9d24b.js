(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{469:function(t,e){},513:function(t,e){},515:function(t,e){},537:function(t,e){},539:function(t,e){},551:function(t,e){},552:function(t,e){},573:function(t,e){},577:function(t,e){},581:function(t,e){},583:function(t,e){},669:function(t,e){},702:function(t,e){},704:function(t,e){},729:function(t,e,n){"use strict";n.r(e);var c=n(21),r=(n(83),n(721)),o=n(720),l=n(682),d=n.n(l),h={data:function(){return{loading:!1,status:"Waiting for connect",address:"",wallet_connect_params:null}},mounted:function(){this.$route.query&&this.$route.query.access_token&&(console.log(this.$route.query),this.wallet_connect_params=this.$route.query,this.$router.push("#"))},methods:{createProvider:function(){return new r.a({bridge:"https://bridge.walletconnect.org",rpc:{97:"https://data-seed-prebsc-2-s3.binance.org:8545/",56:"https://bsc-dataseed.binance.org/"}})},connect:function(){var t=this,e=this.createProvider();e.connector.connected&&(e.connector.killSession(),e=this.createProvider()),e.enable().then(Object(c.a)(regeneratorRuntime.mark((function n(){var c,r,l,h,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.wallet_connect_params){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,e.connector.killSession();case 4:return e.on("accountsChanged",(function(t){return console.log("account change",t[0])})),e.on("chainChanged",(function(t){return console.log("chain change",t)})),e.on("disconnect",(function(code,t){return console.log("disconnected",code,t)})),c=new o.a.providers.Web3Provider(e),r=c.getSigner(),n.next=11,r.getAddress();case 11:return t.address=n.sent,console.log(t.address),t.loading=!0,l="Shark Race. User "+t.wallet_connect_params.email,t.status="Signing message",n.next=18,r.signMessage(l);case 18:return h=n.sent,t.loading=!1,f={headers:{Authorization:"Bearer ".concat(t.wallet_connect_params.access_token)}},n.next=23,d.a.post("/api/wallet-connect/connect",{signature:h,address:t.address},f);case 23:n.sent.data.result?t.status="SUCCESS":t.status="FAIL";case 25:case"end":return n.stop()}}),n)}))))}}},f=n(81),v=n(120),_=n.n(v),w=n(728),m=n(727),y=n(730),component=Object(f.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.wallet_connect_params?n("v-layout",{staticStyle:{height:"100%",width:"100%"},attrs:{"align-center":"",column:"","justify-center":""}},[n("div",[t._v(t._s(t.wallet_connect_params.email))]),t._v(" "),n("div",{staticClass:"grey--text"},[t._v(t._s(t.status))]),t._v(" "),n("div",{staticStyle:{"text-align":"center"}},[t.loading?n("v-progress-linear",{staticClass:"my-2",attrs:{indeterminate:""}}):t._e(),t._v(" "),"SUCCESS"!=t.status?n("v-btn",{staticClass:"mt-5",attrs:{color:"white",block:"",loading:t.loading},on:{click:t.connect}},[n("div",{staticClass:"d-flex",staticStyle:{"justify-content":"center"}},[n("img",{staticClass:"mr-1",attrs:{contain:"",src:"/wallet-connect.svg",width:"30px"}}),t._v(" "),n("div",{staticStyle:{color:"#5697F5"}},[t._v("SHARK CONNECT")])])]):n("div",{staticClass:"mt-5"},[n("div",{staticClass:"green--text"},[t._v("Wallet "+t._s(t.address)+" already connected!")]),t._v(" "),n("div",[t._v("You can close this window...")])])],1)]):n("v-layout",{staticStyle:{height:"100%",width:"100%"},attrs:{"align-center":"",column:"","justify-center":""}},[t._v("\n  Session not found. Please go back and try again...\n")])}),[],!1,null,null,null);e.default=component.exports;_()(component,{VBtn:w.a,VLayout:m.a,VProgressLinear:y.a})}}]);